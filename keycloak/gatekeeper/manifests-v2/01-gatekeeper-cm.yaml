---
kind: ConfigMap
apiVersion: v1
metadata:
  name: gatekeeper-config
data:
  config.yaml: |
    client-id: myapp
    client-secret: fe50afd7-b170-4f21-8db8-51ea3b244c07
    discovery-url: http://keycloak.kryukov.local/iam/auth/realms/app
    enable-metrics: true
    enable-refresh-tokens: true
    encryption-key: AgXa7xRcoClKEU0AHSH4X0XhL5Qy2Z2j
    skip-openid-provider-tls-verify: true
    listen: :3000
    listen-admin: :4000
    redirection-url: https://application.kryukov.local
    resources:
    - uri: /index.html
      white-listed: true
    - uri: /g1.html
      groups:
      - g1
    - uri: /g2.html
      groups:
      - g2
    - uri: /favicon
      white-listed: true
    - uri: /css/*
      white-listed: true
    headers:
      BiTest: allowed
    upstream-url: http://openresty:80