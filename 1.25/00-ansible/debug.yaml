---
- name: Test playbook
  hosts: control1.kryukov.local
  #become: yes

  vars:
    ansible_python_interpreter: /usr/bin/python3
  tasks:
    - name: "Test for installed tigera-operator"
      shell: kubeadm init phase upload-certs --upload-certs --config /etc/kubernetes/kubeadm-config.yaml | tail -1
      register: out
      ignore_errors: yes

    - name: print
      debug:
        var=out
    
    # - name: facts
    #   debug:
    #     var=ansible_facts
    # - name: IP
    #   debug:
    #     var=ansible_facts.default_ipv4.address
# hostvars['test.example.com']['ansible_facts']['distribution']
#    - name: Interface 
#      debug:
#        var=ansible_facts.default_ipv4.interface
    # - name: List
    #   debug:
    #     msg: ""
