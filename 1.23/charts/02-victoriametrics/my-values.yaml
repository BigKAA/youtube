victoria-metrics-single:
  server:
    priorityClassName: "low-priority"
    retentionPeriod: 5h
    extraArgs:
      http.pathPrefix: "/vm"
      selfScrapeInterval: "15s"
      loggerLevel: "INFO"
    persistentVolume:
      storageClass: "managed-nfs-storage"
      size: "10Gi"
    resources:
      requests:
        cpu: 200m
        memory: 500Mi
      limits:
        cpu: "1"
        memory: 2Gi
    readinessProbe:
      httpGet:
        path: /vm/health
        port: http
      initialDelaySeconds: 5
      periodSeconds: 15
      timeoutSeconds: 5
      failureThreshold: 3
    livenessProbe:
      httpGet:
        path: /vm/metrics
        port: victoria
      initialDelaySeconds: 5
      periodSeconds: 15
      timeoutSeconds: 5
    ingress:
      enabled: true
      annotations:
        ingress.kubernetes.io/rewrite-target: "/"
        certmanager.k8s.io/cluster-issuer: monitoring-issuer
      hosts:
        - name: "mon.kryukov.local"
          path: /vm
          port: 9090
      tls:
        - secretName: "mon-tls"
          hosts:
            - mon.kryukov.local
      ingressClassName: system-ingress
    statefulSet:
      enabled: true
      podManagementPolicy: Parallel
    scrape:
      enabled: false
